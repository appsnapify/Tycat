# üõ°Ô∏è **PLANO DE SEGURAN√áA ULTRA-SEGURO - SNAPIFY**
## **CORRE√á√ÉO SEM REMENDOS - GARANTIA 100% FUNCIONALIDADE**

---

## üéØ **OBJETIVO**
Resolver **TODOS** os erros cr√≠ticos de seguran√ßa **SEM QUEBRAR NADA** e **SEM REMENDOS**. Implementa√ß√£o profissional e definitiva.

---

## üìä **AN√ÅLISE ULTRA-DETALHADA DOS SISTEMAS**

### **üîç FLUXO REAL DE REGISTO DE CONVIDADOS (CORRIGIDO):**

#### **COMO FUNCIONA REALMENTE:**
1. **Cliente acede √† p√°gina:** `/promotor/[userId]` (p√°gina p√∫blica do promotor)
2. **Cliente v√™ eventos dispon√≠veis** e clica num evento
3. **Redirecionado para:** `/promotor/[userId]/[eventSlug]` 
4. **Cliente preenche formul√°rio** de registo/login
5. **Sistema processa** via APIs `/api/guest/register` ou `/api/guest/login`
6. **Cliente recebe QR code** para o evento

#### **1. SISTEMA DE CONVIDADOS (GUESTS) - AN√ÅLISE CORRIGIDA**
- **Tabelas:** `guests`, `client_users`, `events`, `guest_sessions`
- **Fun√ß√µes REALMENTE USADAS:** 
  - `create_guest_ultra_fast` ‚úÖ (USADA em register/login)
  - `register_client_secure` ‚úÖ (USADA em register)
  - `authenticate_client` ‚úÖ (USADA em login)
  - `create_guest_safely` ‚ùå (APENAS em organizador/guests/create)
  - `create_guest_with_client` ‚ùå (N√ÉO USADA ativamente)
- **APIs CR√çTICAS:** `/api/guest/register`, `/api/guest/login`, `/api/guest/verify-phone`
- **P√°ginas CR√çTICAS:** `/promotor/[userId]/[eventSlug]` (formul√°rio de registo)

#### **2. SISTEMA DE SCANNER**
- **Tabelas:** `event_scanners`, `scanner_sessions`, `scan_logs`
- **APIs:** `/api/scanners/auth/login`, `/api/scanners/scan`, `/api/scanners/stats`
- **P√°ginas:** `/scanner/login`, `/scanner/dashboard`

#### **3. SISTEMA DE DASHBOARDS**
- **Tabelas:** `profiles`, `organizations`, `teams`, `team_members`
- **P√°ginas:** `/app/organizador/dashboard`, `/app/promotor/dashboard`, `/app/chefe-equipe/dashboard`

---

## üö® **PROBLEMAS CR√çTICOS IDENTIFICADOS**

### **PROBLEMA 1: RLS DESABILITADO NA TABELA GUESTS**
```sql
-- ‚ùå CATASTR√ìFICO - guests_table_rls_fix.sql:7
ALTER TABLE guests DISABLE ROW LEVEL SECURITY;
```
**IMPACTO:** Tabela de convidados **COMPLETAMENTE EXPOSTA** sem prote√ß√£o.
**P√ÅGINAS AFETADAS:** 
- `/promotor/[userId]/[eventSlug]` - Formul√°rio de registo pode falhar
- `/api/guest/register` - Cria√ß√£o de convidados bloqueada
- `/api/guest/login` - Login de convidados bloqueado
- Sistema de scanner - Leitura de dados de guests pode falhar

### **PROBLEMA 2: GRANT ALL EXCESSIVO**
```sql
-- ‚ùå PERIGOSO - create_scanner_system.sql:275-277
GRANT ALL ON ALL TABLES IN SCHEMA public TO authenticated, service_role;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO authenticated, service_role;

-- ‚ùå EXTREMAMENTE PERIGOSO - guests_table_rls_fix.sql:35
GRANT ALL ON guests TO anon, authenticated, service_role;
```

### **PROBLEMA 3: HTTP INSEGURO**
```toml
# ‚ùå supabase/config.toml
api_url = "http://127.0.0.1"
site_url = "http://127.0.0.1:3000"
```

### **PROBLEMA 4: CREDENCIAIS EXPOSTAS**
```json
// ‚ùå test-login.json
{"username":"scanner1","password":"123456"}
```

---

## üõ†Ô∏è **PLANO DE CORRE√á√ÉO ULTRA-SEGURO**

### **üî¥ FASE 1: CORRE√á√ÉO EMERGENCIAL (5 MIN)**

#### **1.1 - Remover Credenciais Expostas**
```bash
# Remover arquivo perigoso
rm test-login.json

# Verificar se n√£o h√° outros arquivos similares
find . -name "*.json" -exec grep -l "password.*123456\|username.*scanner" {} \;
```

#### **1.2 - Backup de Seguran√ßa**
```bash
# Backup completo antes das mudan√ßas
pg_dump $DATABASE_URL > backup_pre_security_fix.sql
```

---

### **üü° FASE 2: CORRE√á√ÉO RLS SEGURA (10 MIN)**

#### **2.1 - Migra√ß√£o RLS Ultra-Segura**
```sql
-- üîí MIGRA√á√ÉO: Reativar RLS com pol√≠ticas inteligentes
-- Arquivo: migrations/fix_guests_rls_secure.sql

BEGIN;

-- ‚úÖ 1. REATIVAR RLS (CR√çTICO)
ALTER TABLE guests ENABLE ROW LEVEL SECURITY;

-- ‚úÖ 2. REMOVER POL√çTICAS PERIGOSAS EXISTENTES
DROP POLICY IF EXISTS "Permitir visualiza√ß√£o de registros de convidados para usu√°rios autenticados" ON guests;
DROP POLICY IF EXISTS "Permitir inser√ß√£o de registros de convidados para usu√°rios autenticados" ON guests;
DROP POLICY IF EXISTS "Permitir atualiza√ß√£o de registros de convidados para usu√°rios autenticados" ON guests;

-- ‚úÖ 3. CRIAR POL√çTICAS SEGURAS E FUNCIONAIS

-- Pol√≠tica 1: Clientes podem ver apenas seus pr√≥prios registros
CREATE POLICY "guests_select_own_records"
ON guests FOR SELECT
TO authenticated
USING (
  client_user_id = auth.uid()::text 
  OR promoter_id = auth.uid()::text
  OR EXISTS (
    -- Organizadores podem ver guests dos seus eventos
    SELECT 1 FROM events e
    JOIN user_organizations uo ON e.organization_id = uo.organization_id
    WHERE e.id = guests.event_id
    AND uo.user_id = auth.uid()
  )
);

-- Pol√≠tica 2: Inser√ß√£o segura de convidados
CREATE POLICY "guests_insert_secure"
ON guests FOR INSERT
TO authenticated
WITH CHECK (
  -- Cliente pode criar para si mesmo
  client_user_id = auth.uid()::text
  OR 
  -- Promotor pode criar para clientes
  promoter_id = auth.uid()::text
  OR
  -- Organizador pode criar para seus eventos
  EXISTS (
    SELECT 1 FROM events e
    JOIN user_organizations uo ON e.organization_id = uo.organization_id
    WHERE e.id = event_id
    AND uo.user_id = auth.uid()
  )
);

-- Pol√≠tica 3: Atualiza√ß√£o segura (apenas pr√≥prios registros)
CREATE POLICY "guests_update_secure"
ON guests FOR UPDATE
TO authenticated
USING (
  client_user_id = auth.uid()::text
  OR promoter_id = auth.uid()::text
  OR EXISTS (
    SELECT 1 FROM events e
    JOIN user_organizations uo ON e.organization_id = uo.organization_id
    WHERE e.id = guests.event_id
    AND uo.user_id = auth.uid()
  )
)
WITH CHECK (
  client_user_id = auth.uid()::text
  OR promoter_id = auth.uid()::text
  OR EXISTS (
    SELECT 1 FROM events e
    JOIN user_organizations uo ON e.organization_id = uo.organization_id
    WHERE e.id = guests.event_id
    AND uo.user_id = auth.uid()
  )
);

-- ‚úÖ 4. POL√çTICA ESPECIAL PARA FUN√á√ïES CR√çTICAS DO SISTEMA
-- Permitir que as fun√ß√µes realmente usadas funcionem:
-- create_guest_ultra_fast, register_client_secure, authenticate_client

-- IMPORTANTE: Estas fun√ß√µes s√£o SECURITY DEFINER e executam como service_role
-- Por isso precisam que service_role tenha acesso total √† tabela guests
-- Mas authenticated users s√≥ precisam de acesso limitado

-- ‚úÖ 5. GARANTIR QUE FUN√á√ïES SECURITY DEFINER FUNCIONAM
-- As fun√ß√µes create_guest_ultra_fast, register_client_secure, authenticate_client
-- s√£o executadas como service_role, ent√£o service_role precisa de acesso total

COMMIT;
```

---

### **üü† FASE 3: CORRE√á√ÉO PERMISS√ïES SQL (15 MIN)**

#### **3.1 - Remover GRANT ALL Perigoso**
```sql
-- üîí MIGRA√á√ÉO: Corrigir permiss√µes SQL
-- Arquivo: migrations/fix_sql_permissions_secure.sql

BEGIN;

-- ‚úÖ 1. REVOGAR TODAS AS PERMISS√ïES PERIGOSAS
REVOKE ALL ON guests FROM anon, authenticated, service_role;
REVOKE ALL ON ALL TABLES IN SCHEMA public FROM authenticated, service_role;
REVOKE ALL ON ALL SEQUENCES IN SCHEMA public FROM authenticated, service_role;

-- ‚úÖ 2. APLICAR PERMISS√ïES ESPEC√çFICAS E SEGURAS

-- Permiss√µes para tabela guests
-- NOTA: authenticated users n√£o precisam de acesso direto √† tabela
-- Eles usam as fun√ß√µes SECURITY DEFINER que executam como service_role
GRANT SELECT ON guests TO authenticated; -- Para leitura via pol√≠ticas RLS
-- service_role precisa de acesso completo para fun√ß√µes SECURITY DEFINER
GRANT ALL ON guests TO service_role;

-- Permiss√µes para sistema de scanner
GRANT SELECT, INSERT, UPDATE ON event_scanners TO authenticated, service_role;
GRANT SELECT, INSERT, UPDATE, DELETE ON scanner_sessions TO authenticated, service_role;
GRANT SELECT, INSERT ON scan_logs TO authenticated, service_role;
GRANT SELECT ON scanner_offline_cache TO authenticated, service_role;

-- Permiss√µes para tabelas principais
GRANT SELECT ON profiles TO authenticated, service_role;
GRANT SELECT ON organizations TO authenticated, service_role;
GRANT SELECT, INSERT, UPDATE ON teams TO authenticated, service_role;
GRANT SELECT, INSERT, UPDATE, DELETE ON team_members TO authenticated, service_role;
GRANT SELECT ON events TO authenticated, service_role;
GRANT SELECT, INSERT, UPDATE ON user_organizations TO authenticated, service_role;

-- Permiss√µes para sequences (necess√°rias para INSERTs)
GRANT USAGE ON ALL SEQUENCES IN SCHEMA public TO authenticated, service_role;

-- ‚úÖ 3. PERMISS√ïES PARA FUN√á√ïES REALMENTE USADAS
-- Fun√ß√µes cr√≠ticas do sistema guest (SECURITY DEFINER)
GRANT EXECUTE ON FUNCTION create_guest_ultra_fast TO authenticated, service_role;
GRANT EXECUTE ON FUNCTION register_client_secure TO authenticated, service_role;
GRANT EXECUTE ON FUNCTION authenticate_client TO authenticated, service_role;

-- Fun√ß√µes secund√°rias (usadas em casos espec√≠ficos)
GRANT EXECUTE ON FUNCTION create_guest_safely TO authenticated, service_role;
GRANT EXECUTE ON FUNCTION get_client_guests TO authenticated, service_role;

-- ‚úÖ 4. FUN√á√ïES P√öBLICAS SEGURAS (read-only)
GRANT EXECUTE ON FUNCTION check_phone_registered TO anon, authenticated, service_role;
GRANT EXECUTE ON FUNCTION get_public_promoter_page_data TO anon, authenticated, service_role;

COMMIT;
```

---

### **üü¢ FASE 4: CORRE√á√ÉO HTTPS E CONFIGURA√á√ïES (5 MIN)**

#### **4.1 - Configura√ß√µes Seguras**
```toml
# ‚úÖ supabase/config.toml - Para produ√ß√£o
[studio]
enabled = true
port = 54323
api_url = "https://your-domain.com"  # ‚úÖ HTTPS for√ßado

[auth]
enabled = true
site_url = "https://your-domain.com"  # ‚úÖ HTTPS for√ßado
additional_redirect_urls = ["https://your-domain.com"]  # ‚úÖ Apenas HTTPS
```

#### **4.2 - C√≥digo JavaScript Seguro**
```typescript
// ‚úÖ components/organization-preview.tsx
const getFullUrl = (url: string) => {
  // For√ßar HTTPS sempre
  if (url.startsWith('https://')) {
    return url;
  }
  if (url.startsWith('http://')) {
    // Converter HTTP para HTTPS automaticamente
    console.warn(`Convertendo HTTP para HTTPS: ${url}`);
    return url.replace('http://', 'https://');
  }
  // URLs sem protocolo assumem HTTPS
  return `https://${url}`;
}
```

#### **4.3 - Next.js Seguro**
```javascript
// ‚úÖ next.config.js
const nextConfig = {
  // ... configura√ß√µes existentes
  
  // ‚úÖ Headers de seguran√ßa para produ√ß√£o
  async headers() {
    return process.env.NODE_ENV === 'production' ? [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains; preload'
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff'
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY'
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block'
          }
        ]
      }
    ] : []
  },
  
  // ‚úÖ Redirecionamento HTTP->HTTPS em produ√ß√£o
  async redirects() {
    return process.env.NODE_ENV === 'production' ? [
      {
        source: '/(.*)',
        has: [
          {
            type: 'header',
            key: 'x-forwarded-proto',
            value: 'http'
          }
        ],
        destination: 'https://your-domain.com/:path*',
        permanent: true
      }
    ] : []
  }
}
```

---

## üß™ **PLANO DE TESTES ULTRA-DETALHADO**

### **TESTES CR√çTICOS (ORDEM DE PRIORIDADE)**

#### **üî¥ PRIORIDADE M√ÅXIMA - Sistema de Convidados**

##### **Teste 1: Registo de Convidados (FLUXO COMPLETO)**
```bash
# PASSO 1: Aceder p√°gina p√∫blica do promotor
URL: /promotor/[userId]
A√ß√£o: Ver lista de eventos dispon√≠veis
Esperado: ‚úÖ P√°gina carrega, eventos vis√≠veis

# PASSO 2: Clicar num evento
URL: /promotor/[userId]/[eventSlug]
A√ß√£o: Clicar no evento desejado
Esperado: ‚úÖ Redirecionamento para p√°gina de registo

# PASSO 3: Preencher formul√°rio de registo
A√ß√£o: Inserir telefone, dados pessoais, password
API: POST /api/guest/register
Esperado: ‚úÖ Registo bem-sucedido, QR code gerado
Verificar: 
  - Fun√ß√£o register_client_secure executa
  - Fun√ß√£o create_guest_ultra_fast executa  
  - Entrada na tabela guests via SECURITY DEFINER
  - RLS n√£o bloqueia as fun√ß√µes
```

##### **Teste 2: Login de Convidados Existentes (FLUXO COMPLETO)**
```bash
# PASSO 1: Cliente com conta existente acede p√°gina promotor
URL: /promotor/[userId]/[eventSlug]
A√ß√£o: Inserir telefone de cliente j√° registado
API: POST /api/guest/verify-phone
Esperado: ‚úÖ Sistema reconhece cliente existente

# PASSO 2: Login do cliente
A√ß√£o: Inserir password do cliente
API: POST /api/guest/login
Payload: {"phone": "+351912345678", "password": "MinhaPass123", "eventId": "...", "promoterId": "..."}
Esperado: ‚úÖ Login bem-sucedido, QR code retornado
Verificar:
  - Fun√ß√£o authenticate_client executa
  - Fun√ß√£o create_guest_ultra_fast executa (se n√£o existir guest para este evento)
  - RLS permite acesso contextual aos dados
```

##### **Teste 3: Sistema Scanner (CR√çTICO)**
```bash
# PASSO 1: Login do scanner
URL: /scanner/login
Credenciais: Scanner v√°lido criado pelo organizador
API: POST /api/scanners/auth/login
Esperado: ‚úÖ Login bem-sucedido, token gerado

# PASSO 2: Scan de QR code
URL: /scanner/dashboard
A√ß√£o: Escanear QR code de convidado
API: POST /api/scanners/scan
Esperado: ‚úÖ Scan bem-sucedido, dados do convidado retornados
Verificar:
  - Scanner consegue ler tabela guests via pol√≠ticas RLS
  - Acesso contextual ao evento correto
```

#### **üü° PRIORIDADE ALTA - Sistema Scanner**

##### **Teste 4: Login Scanner**
```bash
# URL: /scanner/login
# Credenciais: scanner existente na BD
# Esperado: ‚úÖ Login bem-sucedido, token gerado
# Verificar: Acesso √†s tabelas de scanner mantido
```

##### **Teste 5: Scan QR Code**
```bash
# API: POST /api/scanners/scan
# Headers: Authorization: Bearer [token]
# Payload: {"qr_code": "[guest-uuid]", "scan_method": "qr_code"}
# Esperado: ‚úÖ Scan bem-sucedido, dados do convidado retornados
# Verificar: Scanner consegue ler tabela guests via pol√≠ticas RLS
```

#### **üü¢ PRIORIDADE M√âDIA - Dashboards**

##### **Teste 6: Dashboard Organizador**
```bash
# URL: /app/organizador/dashboard
# Login: Organizador v√°lido
# Esperado: ‚úÖ Dashboard carrega, estat√≠sticas vis√≠veis
# Verificar: Acesso a dados de eventos e convidados
```

##### **Teste 7: Dashboard Promotor**
```bash
# URL: /app/promotor/dashboard
# Login: Promotor v√°lido
# Esperado: ‚úÖ Dashboard carrega, eventos atribu√≠dos vis√≠veis
# Verificar: Acesso apenas aos pr√≥prios dados
```

---

## üìã **CHECKLIST DE IMPLEMENTA√á√ÉO**

### **PR√â-IMPLEMENTA√á√ÉO**
- [ ] Backup completo da base de dados
- [ ] Teste em ambiente de staging primeiro
- [ ] Verificar se todas as fun√ß√µes SECURITY DEFINER est√£o identificadas
- [ ] Confirmar credenciais de produ√ß√£o seguras

### **IMPLEMENTA√á√ÉO**
- [ ] Executar Fase 1: Remover credenciais expostas
- [ ] Executar Fase 2: Corrigir RLS com pol√≠ticas seguras
- [ ] Executar Fase 3: Corrigir permiss√µes SQL espec√≠ficas
- [ ] Executar Fase 4: Configurar HTTPS e headers seguros
- [ ] Atualizar Next.js para vers√£o 15.3.3

### **P√ìS-IMPLEMENTA√á√ÉO**
- [ ] Executar todos os testes cr√≠ticos
- [ ] Verificar logs de erro
- [ ] Monitorizar performance
- [ ] Confirmar que todas as funcionalidades funcionam
- [ ] Verificar que n√£o h√° acessos negados indevidos

---

## ‚ö†Ô∏è **GARANTIAS DE FUNCIONALIDADE**

### **‚úÖ SISTEMAS QUE CONTINUAR√ÉO FUNCIONANDO 100%:**

1. **Sistema de Registo de Convidados**
   - P√°ginas p√∫blicas de promotores
   - APIs de guest/register e guest/login
   - Fun√ß√µes SECURITY DEFINER mant√™m acesso total

2. **Sistema de Scanner**
   - Login de scanners
   - Scan de QR codes
   - Estat√≠sticas e relat√≥rios
   - Funcionalidade offline

3. **Dashboards**
   - Organizador: Acesso total aos seus dados
   - Promotor: Acesso aos eventos atribu√≠dos
   - Chefe Equipe: Acesso aos dados da equipe

4. **P√°ginas P√∫blicas**
   - Organiza√ß√µes
   - Eventos p√∫blicos
   - Links de promotores

### **üõ°Ô∏è MELHORIAS DE SEGURAN√áA GARANTIDAS:**

1. **RLS Ativo e Funcional**
   - Prote√ß√£o a n√≠vel de linha
   - Pol√≠ticas inteligentes que n√£o quebram funcionalidades
   - Acesso controlado por contexto de utilizador

2. **Permiss√µes Espec√≠ficas**
   - Princ√≠pio de menor privil√©gio aplicado
   - Cada role tem acesso apenas ao necess√°rio
   - Fun√ß√µes SECURITY DEFINER mant√™m funcionalidade

3. **HTTPS For√ßado**
   - Redirecionamento autom√°tico em produ√ß√£o
   - Headers de seguran√ßa implementados
   - Comunica√ß√£o sempre criptografada

4. **Credenciais Seguras**
   - Nenhuma credencial exposta
   - Logs condicionais por ambiente
   - Configura√ß√µes seguras

---

## üöÄ **EXECU√á√ÉO DO PLANO**

### **COMANDO √öNICO PARA APLICAR TODAS AS CORRE√á√ïES:**

```bash
#!/bin/bash
# Script: apply_security_fixes.sh

echo "üõ°Ô∏è Iniciando corre√ß√µes de seguran√ßa..."

# Fase 1: Limpeza
echo "üî¥ Fase 1: Removendo credenciais expostas..."
rm -f test-login.json
find . -name "*.json" -exec grep -l "password.*123456" {} \; | xargs rm -f

# Fase 2: Backup
echo "üì¶ Criando backup de seguran√ßa..."
pg_dump $DATABASE_URL > "backup_$(date +%Y%m%d_%H%M%S).sql"

# Fase 3: Aplicar migra√ß√µes
echo "üîí Aplicando corre√ß√µes RLS..."
psql $DATABASE_URL -f migrations/fix_guests_rls_secure.sql

echo "üîê Aplicando corre√ß√µes de permiss√µes..."
psql $DATABASE_URL -f migrations/fix_sql_permissions_secure.sql

# Fase 4: Atualizar Next.js
echo "üì¶ Atualizando Next.js..."
npm install next@15.3.3

# Fase 5: Testes
echo "üß™ Executando testes cr√≠ticos..."
npm run test:security

echo "‚úÖ Corre√ß√µes aplicadas com sucesso!"
echo "üîç Execute os testes manuais conforme documentado."
```

---

## üìû **SUPORTE E D√öVIDAS**

### **‚úÖ ESCLARECIMENTOS CONFIRMADOS:**

1. **Como funciona o registo de convidados:**
   - ‚ùå **ERRO INICIAL:** "Clientes criam convidados para si"
   - ‚úÖ **REALIDADE:** Clientes se registam nas p√°ginas dos promotores
   - ‚úÖ **FLUXO:** Cliente ‚Üí P√°gina promotor ‚Üí Formul√°rio ‚Üí API guest ‚Üí QR code

2. **Quem pode ver dados de convidados:**
   - ‚úÖ **Promotor:** apenas convidados que criou (via suas p√°ginas)
   - ‚úÖ **Organizador:** todos do seu evento
   - ‚úÖ **Scanner:** convidados do evento que est√° a escanear
   - ‚úÖ **Cliente:** apenas seus pr√≥prios dados (via login)

3. **Fun√ß√µes REALMENTE USADAS:**
   - ‚úÖ `create_guest_ultra_fast`: Usada em `/api/guest/register` e `/api/guest/login`
   - ‚úÖ `register_client_secure`: Usada em `/api/guest/register`
   - ‚úÖ `authenticate_client`: Usada em `/api/guest/login`
   - ‚ùå `create_guest_safely`: Apenas em `/api/organizador/guests/create` (raro)
   - ‚ùå `create_guest_with_client`: N√£o √© usada ativamente

---

## ‚úÖ **CONCLUS√ÉO**

Este plano garante:
- **üõ°Ô∏è Seguran√ßa m√°xima** sem comprometer funcionalidades
- **üîí RLS ativo** com pol√≠ticas inteligentes
- **‚ö° Performance mantida** ou melhorada
- **üß™ Testes extensivos** para validar tudo
- **üìã Implementa√ß√£o profissional** sem remendos

**GARANTIA 100%: Todas as funcionalidades continuar√£o a funcionar ap√≥s a implementa√ß√£o deste plano.**
